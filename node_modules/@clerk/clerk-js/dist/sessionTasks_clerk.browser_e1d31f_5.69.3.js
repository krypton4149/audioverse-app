"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["877"],{3983:function(e,t,n){n.r(t),n.d(t,{SessionTask:()=>v});var r=n(9109),i=n(3799),a=n(2810),o=n(9144),s=n(4455),c=n(2672),l=n(1455),u=n(6663),d=n(1576),Z=n(6988),h=n(4676),g=n(9888),p=n(1816),$=n(5536),f=n(7484);let k=(0,c.withCardStateProvider)(()=>{let{userMemberships:e,userInvitations:t,userSuggestions:n}=(0,i.eW)(f.AO),a=(0,o.useRef)(),s=e?.isLoading||t?.isLoading||n?.isLoading,c=!!(e?.count||t?.count||n?.count);return s?(0,r.tZ)(C,{children:(0,r.tZ)(z,{})}):c||"organization-selection"===a.current?(0,r.tZ)(S,{currentFlow:a}):(0,r.tZ)(x,{currentFlow:a})}),S=({currentFlow:e})=>{let[t,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{e.current="organization-selection"},[e]),(0,r.tZ)(d.OrganizationListContext.Provider,{value:{componentName:"OrganizationList",skipInvitationScreen:!0},children:(0,r.tZ)(C,{children:t?(0,r.tZ)(g.Box,{sx:e=>({padding:`${e.space.$none} ${e.space.$5} ${e.space.$5}`}),children:(0,r.tZ)(p.$,{flow:"default",startPage:{headerTitle:(0,g.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0,onCancel:()=>n(!1)})}):(0,r.tZ)($.S,{onCreateOrganizationClick:()=>n(!0)})})})},x=({currentFlow:e})=>((0,o.useEffect)(()=>{e.current="create-organization"},[e]),(0,r.tZ)(C,{children:(0,r.tZ)(g.Box,{sx:e=>({padding:`${e.space.$none} ${e.space.$5} ${e.space.$5}`}),children:(0,r.tZ)(p.$,{flow:"default",startPage:{headerTitle:(0,g.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0})})})),C=({children:e})=>{let t=(0,c.useCardState)();return(0,r.BX)(s.Z.Root,{children:[(0,r.BX)(s.Z.Content,{sx:e=>({padding:`${e.space.$8} ${e.space.$none} ${e.space.$none}`}),children:[(0,r.tZ)(s.Z.Alert,{sx:e=>({margin:`${e.space.$none} ${e.space.$5}`}),children:t.error}),e]}),(0,r.tZ)(s.Z.Footer,{})]})},z=()=>(0,r.tZ)(g.Flex,{direction:"row",center:!0,sx:e=>({height:"100%",minHeight:e.sizes.$60}),children:(0,r.tZ)(g.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:g.descriptors.spinner})}),T=()=>{let e=(0,i.cL)(),{navigate:t}=(0,h.useRouter)(),{redirectUrlComplete:n}=(0,Z.G)();return(0,o.useEffect)(()=>{let t=setTimeout(()=>{e.__experimental_navigateToTask({redirectUrlComplete:n})},500);return()=>clearTimeout(t)},[t,e,n]),(0,r.BX)(s.Z.Root,{children:[(0,r.tZ)(s.Z.Content,{children:(0,r.tZ)(l.I,{})}),(0,r.tZ)(s.Z.Footer,{})]})};function m(){return(0,r.BX)(h.Switch,{children:[(0,r.tZ)(h.Route,{path:u.m.org,children:(0,r.tZ)(k,{})}),(0,r.tZ)(h.Route,{index:!0,children:(0,r.tZ)(T,{})})]})}let v=(0,c.withCardStateProvider)(()=>{let e=(0,i.cL)(),{navigate:t}=(0,h.useRouter)(),n=(0,o.useContext)(d.SignInContext),c=(0,o.useContext)(d.SignUpContext),[u,g]=(0,o.useState)(!1),p=n?.afterSignInUrl??c?.afterSignUpUrl??e?.buildAfterSignInUrl();(0,o.useEffect)(()=>{if(u)return;let n=e.session?.currentTask;if(!n||e.session?.status==="active"){t(p);return}e.telemetry?.record(a.Zg("SessionTask",{task:n.key}))},[e,t,u,p]);let $=(0,o.useCallback)(()=>(g(!0),e.__experimental_navigateToTask({redirectUrlComplete:p}).finally(()=>g(!1))),[e,p]);return e.session?.currentTask?(0,r.tZ)(Z.H.Provider,{value:{nextTask:$,redirectUrlComplete:p},children:(0,r.tZ)(m,{})}):(0,r.BX)(s.Z.Root,{children:[(0,r.tZ)(s.Z.Content,{children:(0,r.tZ)(l.I,{})}),(0,r.tZ)(s.Z.Footer,{})]})})}}]);