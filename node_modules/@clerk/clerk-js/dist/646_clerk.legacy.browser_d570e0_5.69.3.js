"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["646"],{12264:function(e,t,o){o.d(t,{B:()=>d,r:()=>x});var r=o(79109),n=o(16600),a=o(39082),i=o(55913),l=o(11576),c=o(89888),s=o(24676);let d=()=>{let{data:e,isLoading:t,count:o}=(0,l.usePaymentAttempts)(),a=(0,l.useSubscriberTypeLocalizationRoot)();return(0,r.tZ)(n.wQ,{page:1,onPageChange:e=>{},itemCount:o,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:(0,c.localizationKeys)("".concat(a,".billingPage.paymentHistorySection.empty")),headers:[(0,c.localizationKeys)("".concat(a,".billingPage.paymentHistorySection.tableHeader__date")),(0,c.localizationKeys)("".concat(a,".billingPage.paymentHistorySection.tableHeader__amount")),(0,c.localizationKeys)("".concat(a,".billingPage.paymentHistorySection.tableHeader__status"))],rows:e.map(e=>(0,r.tZ)(p,{paymentAttempt:e},e.id))})},p=e=>{let{paymentAttempt:t}=e,{id:o,amount:l,failedAt:d,paidAt:p,updatedAt:m,status:u}=t,{navigate:y}=(0,s.useRouter)();return(0,r.BX)(n.Uk,{onClick:()=>{y("payment-attempt/".concat(o))},children:[(0,r.BX)(c.Td,{sx:{cursor:"pointer"},children:[(0,r.tZ)(c.Text,{variant:"subtitle",children:(0,a.p)(p||d||m,"long")}),(0,r.tZ)(c.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,i.L)(o)})]}),(0,r.tZ)(c.Td,{sx:{cursor:"pointer"},children:(0,r.BX)(c.Text,{children:[l.currencySymbol,l.amountFormatted]})}),(0,r.tZ)(c.Td,{children:(0,r.tZ)(c.Badge,{colorScheme:"paid"===u?"success":"failed"===u?"danger":"primary",sx:{textTransform:"capitalize"},children:u})})]})};o(45261),o(70957),o(24551),o(22349),o(65223);var m=o(92654),u=o(28e3),y=o(86005),h=o(12464),b=o(96519);let x=()=>{var e,t;let{params:o,navigate:n}=(0,s.useRouter)(),{isLoading:d}=(0,l.useStatements)(),{getPaymentAttemptById:p}=(0,l.usePaymentAttemptsContext)(),h=(0,y.xr)(),b=o.paymentAttemptId?p(o.paymentAttemptId):null,x=null==b?void 0:b.subscriptionItem;return d?(0,r.tZ)(c.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,r.tZ)(c.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:c.descriptors.spinner})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(m.h.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,r.tZ)(m.h.BackLink,{onClick:()=>void n("../../",{searchParams:new URLSearchParams("tab=payments")}),children:(0,r.tZ)(m.h.Title,{localizationKey:(0,c.localizationKeys)("".concat(h,".billingPage.start.headerTitle__payments")),textVariant:"h2"})})}),b?(0,r.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:[(0,r.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,r.BX)(c.Span,{elementDescriptor:c.descriptors.paymentAttemptHeaderTitleContainer,children:[(0,r.tZ)(c.Heading,{elementDescriptor:c.descriptors.paymentAttemptHeaderTitle,textVariant:"h2",localizationKey:(0,a.p)(b.paidAt||b.failedAt||b.updatedAt,"long")}),(0,r.BX)(c.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,r.tZ)(S,{copyLabel:"Copy payment attempt ID",text:b.id}),(0,r.tZ)(c.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,i.L)(b.id)})]})]}),(0,r.tZ)(c.Badge,{elementDescriptor:c.descriptors.paymentAttemptHeaderBadge,colorScheme:"paid"===b.status?"success":"failed"===b.status?"danger":"primary",sx:{textTransform:"capitalize"},children:b.status})]}),(0,r.tZ)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptBody,sx:e=>({padding:e.space.$4}),children:x&&(0,r.BX)(u.a.Root,{children:[(0,r.BX)(u.a.Group,{children:[(0,r.tZ)(u.a.Title,{title:x.plan.name}),(0,r.tZ)(u.a.Description,{prefix:"annual"===x.planPeriod?"x12":void 0,text:"".concat(x.plan.currencySymbol).concat("month"===x.planPeriod?x.plan.amountFormatted:x.plan.annualMonthlyAmountFormatted)})]}),(0,r.BX)(u.a.Group,{borderTop:!0,variant:"tertiary",children:[(0,r.tZ)(u.a.Title,{title:(0,c.localizationKeys)("commerce.subtotal")}),(0,r.tZ)(u.a.Description,{text:"".concat(null===(e=x.amount)||void 0===e?void 0:e.currencySymbol).concat(null===(t=x.amount)||void 0===t?void 0:t.amountFormatted)})]}),x.credit&&x.credit.amount.amount>0&&(0,r.BX)(u.a.Group,{variant:"tertiary",children:[(0,r.tZ)(u.a.Title,{title:(0,c.localizationKeys)("commerce.credit")}),(0,r.tZ)(u.a.Description,{text:"- ".concat(x.credit.amount.currencySymbol).concat(x.credit.amount.amountFormatted)})]})]})}),(0,r.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,r.tZ)(c.Text,{variant:"h3",localizationKey:(0,c.localizationKeys)("commerce.totalDue"),elementDescriptor:c.descriptors.paymentAttemptFooterLabel}),(0,r.BX)(c.Span,{elementDescriptor:c.descriptors.paymentAttemptFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,r.tZ)(c.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:c.descriptors.paymentAttemptFooterCurrency,sx:{textTransform:"uppercase"},children:b.amount.currency}),(0,r.BX)(c.Text,{variant:"h3",elementDescriptor:c.descriptors.paymentAttemptFooterValue,children:[b.amount.currencySymbol,b.amount.amountFormatted]})]})]})]}):(0,r.tZ)(c.Text,{localizationKey:(0,c.localizationKeys)("".concat(h,".billingPage.paymentHistorySection.notFound")),sx:{textAlign:"center"}})]})};function S(e){let{text:t,copyLabel:o="Copy"}=e,{onCopy:n,hasCopied:a}=(0,h.VP)(t);return(0,r.tZ)(c.Button,{elementDescriptor:c.descriptors.paymentAttemptCopyButton,variant:"unstyled",onClick:n,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":a?"Copied":o,children:(0,r.tZ)(c.Icon,{size:"sm",icon:a?b.Jr:b.CK,"aria-hidden":!0})})}},15515:function(e,t,o){o.d(t,{j:()=>x,f:()=>d});var r=o(79109),n=o(16600),a=o(39082),i=o(11576),l=o(89888),c=o(24676),s=o(55913);let d=()=>{let{data:e,isLoading:t,count:o}=(0,i.useStatements)(),a=(0,i.useSubscriberTypeLocalizationRoot)();return(0,r.tZ)(n.wQ,{page:1,onPageChange:e=>{},itemCount:o,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:(0,l.localizationKeys)("".concat(a,".billingPage.statementsSection.empty")),headers:[(0,l.localizationKeys)("".concat(a,".billingPage.statementsSection.tableHeader__date")),(0,l.localizationKeys)("".concat(a,".billingPage.statementsSection.tableHeader__amount"))],rows:e.map(e=>(0,r.tZ)(p,{statement:e},e.id))})},p=e=>{let{statement:t}=e,{timestamp:o,id:i,totals:{grandTotal:d}}=t,{navigate:p}=(0,c.useRouter)();return(0,r.BX)(n.Uk,{onClick:()=>{p("statement/".concat(i))},children:[(0,r.BX)(l.Td,{sx:{cursor:"pointer"},children:[(0,r.tZ)(l.Text,{variant:"subtitle",children:(0,a.p)(o,"monthyear")}),(0,r.tZ)(l.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,s.L)(i)})]}),(0,r.tZ)(l.Td,{sx:{cursor:"pointer"},children:(0,r.BX)(l.Text,{colorScheme:"secondary",children:[d.currencySymbol,d.amountFormatted]})})]})};o(45261),o(70957),o(24551),o(22349),o(65223);var m=o(92654),u=o(96519),y=o(12464);function h(e){let{text:t,copyLabel:o="Copy"}=e,{onCopy:n,hasCopied:a}=(0,y.VP)(t);return(0,r.tZ)(l.Button,{elementDescriptor:l.descriptors.statementCopyButton,variant:"unstyled",onClick:n,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":a?"Copied":o,children:(0,r.tZ)(l.Icon,{size:"sm",icon:a?u.Jr:u.CK,"aria-hidden":!0})})}let b={Root:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:t})},Header:function(e){let{title:t,id:o,status:n}=e;return(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,r.BX)(l.Span,{elementDescriptor:l.descriptors.statementHeaderTitleContainer,children:[(0,r.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementHeaderTitle,textVariant:"h2",localizationKey:t}),(0,r.BX)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,r.tZ)(h,{copyLabel:"Copy statement ID",text:o}),(0,r.tZ)(l.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,s.L)(o)})]})]}),(0,r.tZ)(l.Badge,{elementDescriptor:l.descriptors.statementHeaderBadge,colorScheme:"open"===n?"secondary":"primary",sx:{textTransform:"capitalize"},children:n})]})},Body:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementBody,children:t})},Section:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSection,as:"section",children:t})},SectionHeader:function(e){let{text:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionHeader,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$1,background:e.colors.$neutralAlpha50,borderBlockWidth:e.borderWidths.$normal,borderBlockStyle:e.borderStyles.$solid,borderBlockColor:e.colors.$neutralAlpha100}),children:(0,r.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementSectionHeaderTitle,textVariant:"h3",as:"h2",localizationKey:t,sx:e=>({fontWeight:e.fontWeights.$medium})})})},SectionContent:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContent,children:t})},SectionContentItem:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentItem,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:t})},SectionContentDetailsHeader:function(e){let{title:t,description:o,secondaryTitle:n,secondaryDescription:a}=e;return(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeader,sx:e=>({marginBlockEnd:e.space.$2,display:"flex",justifyContent:"space-between"}),children:[(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItem,children:[(0,r.BX)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1}),children:[(0,r.tZ)(l.Icon,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItemIcon,icon:u.ou,colorScheme:"neutral"}),(0,r.tZ)(l.Heading,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderTitle,as:"h3",textVariant:"h3",localizationKey:t})]}),(0,r.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderDescription,localizationKey:o,sx:{textTransform:"lowercase"}})]}),(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderItem,sx:{textAlign:"right"},children:[n&&(0,r.tZ)(l.Text,{variant:"h3",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderSecondaryTitle,localizationKey:n}),a&&(0,r.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsHeaderSecondaryDescription,localizationKey:a})]})]})},SectionContentDetailsList:function(e){let{children:t}=e;return(0,r.tZ)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsList,as:"ul",sx:e=>({margin:0,padding:0,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$md,overflow:"hidden"}),children:t})},SectionContentDetailsListItem:function(e){let{labelIcon:t,label:o,valueCopyable:n=!1,value:a,valueTruncated:i=!1}=e;return(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItem,as:"li",sx:e=>({margin:0,paddingInline:e.space.$2,paddingBlock:e.space.$1x5,display:"flex",justifyContent:"space-between",flexWrap:"wrap",columnGap:e.space.$2,rowGap:e.space.$0x5,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:[(0,r.BX)(l.Span,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItemLabelContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1x5}),children:[t?(0,r.tZ)(l.Icon,{icon:t,colorScheme:"neutral"}):null,(0,r.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementSectionContentDetailsListItemLabel,localizationKey:o})]}),(0,r.tZ)(l.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:"string"==typeof a?(0,r.BX)(r.HY,{children:[n?(0,r.tZ)(h,{copyLabel:"Copy statement ID",text:a}):null,(0,r.tZ)(l.Text,{colorScheme:"secondary",variant:"caption",elementDescriptor:l.descriptors.statementSectionContentDetailsListItemValue,children:i?(0,s.L)(a):a})]}):(0,r.tZ)(l.Text,{elementDescriptor:l.descriptors.statementSectionContentDetailsListItemValue,colorScheme:"secondary",variant:"caption",localizationKey:a})})]})},Footer:function(e){let{label:t,value:o}=e;return(0,r.BX)(l.Box,{elementDescriptor:l.descriptors.statementFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,r.tZ)(l.Text,{variant:"h3",localizationKey:t,elementDescriptor:l.descriptors.statementFooterLabel}),(0,r.BX)(l.Span,{elementDescriptor:l.descriptors.statementFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,r.tZ)(l.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:l.descriptors.statementFooterCurrency,children:"USD"}),(0,r.tZ)(l.Text,{variant:"h3",elementDescriptor:l.descriptors.statementFooterValue,children:o})]})]})}},x=()=>{let{params:e,navigate:t}=(0,c.useRouter)(),{isLoading:o}=(0,i.useStatements)(),{getStatementById:n}=(0,i.useStatementsContext)(),s=(0,i.useSubscriberTypeLocalizationRoot)(),{t:d}=(0,l.useLocalizations)(),p=e.statementId?n(e.statementId):null;return o?(0,r.tZ)(l.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,r.tZ)(l.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:l.descriptors.spinner})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(m.h.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,r.tZ)(m.h.BackLink,{onClick:()=>void t("../../",{searchParams:new URLSearchParams("tab=statements")}),children:(0,r.tZ)(m.h.Title,{localizationKey:(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.title")),textVariant:"h2"})})}),p?(0,r.BX)(b.Root,{children:[(0,r.tZ)(b.Header,{title:(0,a.p)(p.timestamp,"monthyear"),id:p.id,status:p.status}),(0,r.tZ)(b.Body,{children:p.groups.map(e=>(0,r.BX)(b.Section,{children:[(0,r.tZ)(b.SectionHeader,{text:(0,a.p)(e.timestamp,"long")}),(0,r.tZ)(b.SectionContent,{children:e.items.map(e=>{var t,o;return(0,r.BX)(b.SectionContentItem,{children:[(0,r.tZ)(b.SectionContentDetailsHeader,{title:e.subscription.plan.name,description:"".concat(null===(t=e.subscription.amount)||void 0===t?void 0:t.currencySymbol).concat(null===(o=e.subscription.amount)||void 0===o?void 0:o.amountFormatted," / ").concat("month"===e.subscription.planPeriod?d((0,l.localizationKeys)("commerce.month")):d((0,l.localizationKeys)("commerce.year"))),secondaryTitle:"".concat(e.amount.currencySymbol).concat(e.amount.amountFormatted)}),(0,r.BX)(b.SectionContentDetailsList,{children:[(0,r.tZ)(b.SectionContentDetailsListItem,{label:"recurring"===e.chargeType?(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.itemCaption__paidForPlan"),{plan:e.subscription.plan.name,period:e.subscription.planPeriod}):(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.itemCaption__subscribedAndPaidForPlan"),{plan:e.subscription.plan.name,period:e.subscription.planPeriod}),labelIcon:"recurring"===e.chargeType?u.uR:u.v3,value:e.id,valueTruncated:!0,valueCopyable:!0}),e.subscription.credit&&e.subscription.credit.amount.amount>0?(0,r.tZ)(b.SectionContentDetailsListItem,{label:(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.itemCaption__proratedCredit")),value:"(".concat(e.subscription.credit.amount.currencySymbol).concat(e.subscription.credit.amount.amountFormatted,")")}):null]})]},e.id)})})]},e.timestamp.toISOString()))}),(0,r.tZ)(b.Footer,{label:(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.totalPaid")),value:"".concat(p.totals.grandTotal.currencySymbol).concat(p.totals.grandTotal.amountFormatted)})]}):(0,r.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("".concat(s,".billingPage.statementsSection.notFound")),sx:{textAlign:"center"}})]})}}}]);